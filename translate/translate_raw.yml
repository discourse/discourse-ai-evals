id: translate_raw
name: Translate raw text
description: Exercises the post raw translator helpers with long-form and markdown heavy text
feature: translation:post_raw_translator
args:
  target_locale: zh_CN
  cases:
    - input: |
        "Chapter 1: Banquet at Peach Garden, three heroes sworn brotherhood, beheading the Yellow Turban hero and making his first achievement

        The Yangtze River rolls eastward, and its waves wash away all heroes. Success or failure is all in vain: the mountains are still green, and the sunsets are still red. Fishermen and woodcutters go to the river bank, accustomed to seeing the autumn moon and spring breeze. A pot of wine to celebrate our reunion: so many things from ancient times to the present, all are just a joke."
    - input: |
        "Hi there,

        Can I have some more time for my trial? I did not have enough time this week,

        Thank you!

        N

        <details class='elided'>
        <summary title='Show trimmed content'>&#183;&#183;&#183;</summary>

        <table>
        <table>
        <table>
        <tr>
        <td>

        <img border="0" hspace="0" alt="" src="upload://1i1i1ii12hh23d.jpeg" width="110" height="110" style="width: 110px; height: 110px" class="C2Picture">

        </td>
        </tr>
        </table><table>
        <table>
        <table>
        <table>
        <tr>
        <td>

        Derpy McDerpface

        </td>
        </tr>
        <tr>
        <td>

        Head Derp

        </td>
        </tr>
        <tr>
        <td>

        </td>
        </tr>
        </table><table>
        <table>
        <tr>
        <td>

        <img src="//discourse.com/derp/derpy.png" id="0.7w9t7c3cyj" alt="Phone Icon 1@2x.png" height="16" width="16" style="
                                                                                                                            display: block;
                                                                                                                            width: 16px;
                                                                                                                            height: 16px;
                                                                                                                            font-family: Calibri;
                                                                                                                            vertical-align: middle;
         margin-top: 1px;
         ">

        </td>
        </tr>
        </table></table></table></table></table></table></table>

        **From:** Discourse Team <team@discourse.org>
        **Date:** Wednesday, 5 February 2025 at 19:11
        **To:** Derpy McDerpface <derp@discourse.org>
        **Subject:** Discourse - Your trial is ending for derp.discourse.group

        __*Caution!*__ *This email was sent outside of D. Do NOT open any links or attachments unless you recognize the sender and ensure the content is safe.*

        I hope you’ve enjoyed Discourse during your free trial at [derp.discourse.group](http://derp.discourse.group/)!

        To subscribe and keep your site, follow this link (it has additional details):

        [**Start Subscription**](https://try.discourse.org)

        If you need more time to evaluate Discourse, or you have any questions, just reply to this email. We’re here to help!

        If we don’t hear back from you, we will shut down your site. **Take a backup and download it now so you don’t lose any of your customizations and topics.** You can do so from the Admin section of your site.

        The Discourse Team
        [https://discourse.org](https://discourse.org/)

        </details>"
    - input: |
        "Can you convert this to ruby for me?

        ```python
        import requests

        response = requests.get('https://api.github.com')
        print(response.json())
        ```

        Return only the code without explanations."
    - input: |
        "How do I say Discourse in Chinese? Is Discourse a term known in other languages, can you share?"
judge:
  llm: gpt-4o
  pass_rating: 8
  prompt: |
    Is the following translation to {{target_locale}}:

    [[[
    {{output}}
    ]]]

    faithful to this source?

    [[[
    {{message}}
    ]]]

    - Preserve Markdown and HTML without adding or removing tags
    - Links must remain intact
    - Do not add extra commentary beyond the translation itself
    - Ensure the answer is actually written in {{target_locale}}
