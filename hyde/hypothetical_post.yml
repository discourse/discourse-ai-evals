id: hyde_hypothetical_post
name: HyDE hypothetical topic drafts
description: Ensures HyDE expands search queries into dense, on-topic summaries
feature: embeddings:hyde
args:
  cases:
    - query: "How do I configure S3 backups and test restores for my Discourse forum?"
    - query: "What moderation workflows help triage long-running Discourse flags?"
judge:
  llm: gpt-4o
  pass_rating: 8
  prompt: |
    A HyDE response should look like a plausible forum post that elaborates on the source query.
    Review the generated text:

    [[[
    {{output}}
    ]]]

    Does it expand and stay relevant to the query below, adding concrete detail instead of simply restating it?

    [[[
    {{query}}
    ]]]

    - Award a high score only if the output contains at least two informative sentences
    - The prose should reuse important terms from the query and introduce supporting steps, risks, or examples
    - Reject answers that are meta commentary, apologies, or that ask the user for more information
